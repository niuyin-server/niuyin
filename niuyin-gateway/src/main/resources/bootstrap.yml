server:
  port: 9090
spring:
  main:
    allow-bean-definition-overriding: true
  application:
    name: niuyin-gateway
  profiles:
#    active: dev
    active: pro
  config:
    import:
      - optional:nacos:${spring.application.name}-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension} # 加载【Nacos】的配置
      - nacos:shared-redis-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}
      - nacos:shared-logging-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}
  cloud:
    nacos:
      server-addr: 43.240.221.8:8848
      discovery:
        namespace: pro
        group: DEFAULT_GROUP
      config:
        namespace: pro
        group: DEFAULT_GROUP
        file-extension: yml
    gateway:
      default-filters:
        - DedupeResponseHeader=Access-Control-Allow-Origin, RETAIN_UNIQUE
      httpclient:
        wiretap: true
        #        response-timeout: 60000
        connect-timeout: 60000 # 全局的TCP连接超时时间默认时间是45秒，修改为5秒
        # 连接池配置
      #        pool:
      #          max-connections: 10000 # 最大连接数
      #          max-life-time: 30 # 最大连接时间
      #          acquire-timeout: 30 # 返回时间
      #          max-idle-time: 10000 # 最大空闲时间
      #          type: ELASTIC # 设置固定链接池 #ELASTIC：弹性连接池，连接数上限为Integer.MAX，默认值 #FIXED: 固定连接池，最大连接数采用spring.cloud.gateway.httpclient.pool.max-connections的配置 #DISABLED：不使用任何连接池
      #      streaming-media-types:
      #        - text/event-stream
      #        - application/stream+json
    sentinel:
      transport:
        dashboard: localhost:8083
      eager: true
      http-method-specify: true
      # nacos配置持久化
      datasource:
        ds1:
          nacos:
            server-addr: localhost:8848
            dataId: sentinel-niuyin-gateway
            groupId: DEFAULT_GROUP
            data-type: json
            rule-type: gw-flow
