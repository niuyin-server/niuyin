server:
  port: 9101
  servlet:
    encoding:
      enabled: true
      charset: UTF-8 # 必须设置 UTF-8，避免 WebFlux 流式返回（AI 场景）会乱码问题
      force: true

spring:
  application:
    name: niuyin-ai
  profiles:
#    active: dev
    active: pro
  config:
    import:
      - optional:nacos:${spring.application.name}-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension} # 加载【Nacos】的配置
      - nacos:shared-redis-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}
      - nacos:shared-logging-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}
      - nacos:shared-oss-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}
  cloud:
    nacos:
      server-addr: 43.240.221.8:8848
      discovery:
        namespace: pro
        group: DEFAULT_GROUP
      config:
        namespace: pro
        group: DEFAULT_GROUP
        file-extension: yml
    ai:
      tongyi: # 通义千问
        tongyi:
          api-key: sk-6879fb6daefa445d890bb9edf8dbab7c
  ai:
    openai:
      base-url: https://api.siliconflow.cn/ # https://dashscope.aliyuncs.com/compatible-mode
      api-key: sk-epsakfenqnyzoxhmbucsxlhkdqlcbnimslqoivkshalvdozz # sk-6879fb6daefa445d890bb9edf8dbab7c
      chat:
        options:
          model: deepseek-ai/DeepSeek-V3 # qwen-plus
      image:
        options:
          model: Kwai-Kolors/Kolors # wanx2.1-t2i-turbo

  datasource:
    hikari:
      # 连接池最大连接数，默认是 10
      maximum-pool-size: 60
      # 链接超时时间，默认 30000(30 秒)
      connection-timeout: 60000
      # 空闲连接存活最大时间，默认 600000(10 分钟)
      idle-timeout: 60000
      # 连接将被测试活动的最大时间量
      validation-timeout: 3000
      # 此属性控制池中连接的最长生命周期，值 0 表示无限生命周期，默认 1800000(30 分钟)
      max-lifetime: 60000
      # 连接到数据库时等待的最长时间(秒)
      login-timeout: 5
      # 池中维护的最小空闲连接数
      minimum-idle: 10

ribbon:
  eager-load:
    enabled: true

logging:
  level:
    org.springframework.ai.chat.client.advisor: DEBUG

# mybatis配置
mybatis-plus:
  type-aliases-package: com.niuyin.**.domain
  mapper-locations: classpath*:mapper/**/*.xml
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

# 雪花算法主键生成器
snowflake:
  datacenterId: 2 # 数据中心ID
  machineId: 1 # 机器ID

--- # ai配置

spring:
  ai:
    vectorstore: # 向量存储
      redis:
        initialize-schema: true
        index: knowledge_index # Redis 中向量索引的名称：用于存储和检索向量数据的索引标识符，所有相关的向量搜索操作都会基于这个索引进行
        prefix: "knowledge_segment:" # Redis 中存储向量数据的键名前缀：这个前缀会添加到每个存储在 Redis 中的向量数据键名前，每个 document 都是一个 hash 结构
      qdrant:
        initialize-schema: true
        collection-name: knowledge_segment # Qdrant 中向量集合的名称：用于存储向量数据的集合标识符，所有相关的向量操作都会在这个集合中进行
        host: 127.0.0.1
        port: 6334
      milvus:
        initialize-schema: true
        database-name: default # Milvus 中数据库的名称
        collection-name: knowledge_segment # Milvus 中集合的名称：用于存储向量数据的集合标识符，所有相关的向量操作都会在这个集合中进行
        client:
          host: 127.0.0.1
          port: 19530
    qianfan: # 文心一言
      api-key: x0cuLZ7XsaTCU08vuJWO87Lg
      secret-key: R9mYF9dl9KASgi5RUq0FQt3wRisSnOcK
    zhipuai: # 智谱 AI
      api-key: 32f84543e54eee31f8d56b2bd6020573.3vh9idLJZ2ZhxDEs
    openai: # OpenAI 官方
      api-key: sk-aN6nWn3fILjrgLFT0fC4Aa60B72e4253826c77B29dC94f17
      base-url: https://api.gptsapi.net
    azure: # OpenAI 微软
      openai:
        endpoint: https://eastusprejade.openai.azure.com
        api-key: xxx
    ollama:
      base-url: http://127.0.0.1:11434
      chat:
        model: llama3
    stabilityai:
      api-key: sk-e53UqbboF8QJCscYvzJscJxJXoFcFg4iJjl1oqgE7baJETmx
    dashscope: # 通义千问
      api-key: sk-7d903764249848cfa912733146da12d1
    minimax: # Minimax：https://www.minimaxi.com/
      api-key: xxxx
    moonshot: # 月之暗灭（KIMI）
      api-key: sk-abc

niuyin:
  ai:
    deep-seek: # DeepSeek
      enable: true
      api-key: sk-47dae11
      model: deepseek-chat
    doubao: # 字节豆包
      enable: true
      api-key: b7e962aa-fb6f-4916-a999-c4ce99c97527
      model: doubao-1-5-lite-32k-250115
    hunyuan: # 腾讯混元
      enable: true
      api-key: sk-abc
      model: hunyuan-turbo
    siliconflow: # 硅基流动
      enable: true
      api-key: sk-epsakfenqnyzoxhmbucsxlhkdqlcbnimslqoivkshalvdozz
      model: deepseek-ai/DeepSeek-R1-Distill-Qwen-7B
    xinghuo: # 讯飞星火
      enable: true
      appKey: 75b161ed2aef4719b275d6e7f2a4d4cd
      secretKey: YWYxYWI2MTA4ODI2NGZlYTQyNjAzZTcz
      model: generalv3.5
    baichuan: # 百川智能
      enable: true
      api-key: sk-abc
      model: Baichuan4-Turbo
    midjourney:
      enable: true
      #    base-url: https://api.holdai.top/mj-relax/mj
      base-url: https://api.holdai.top/mj
      api-key: sk-dZEPiVaNcT3FHhef51996bAa0bC74806BeAb620dA5Da10Bf # sk-n8u7ObhQ3XXr8bVKA976D81bD1C44040909133B095AbE559
      notify-url: https://77c22fba.r37.cpolar.top/admin-api/ai/image/midjourney/notify
    suno: # ai音乐
      enable: true
      #    base-url: https://suno-55ishh05u-status2xxs-projects.vercel.app
      base-url: http://127.0.0.1:3001


